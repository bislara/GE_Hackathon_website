 window.onload = function () {

        var start_flag=0;
        var pause_flag=0;
        var stop_flag=0;

        $(document).on("click", "#start_btn", function () {
            start_flag=1;
        });

        $(document).on("click", "#pause_btn", function () {
          if (pause_flag) {
            pause_flag=0;
          }
          else if (pause_flag==0)
              pause_flag=1;
        });

        $(document).on("click", "#stop_btn", function () {
            stop_flag=1;
            $("#graph1").css("display", "none");
            $("#graph11").css("display", "none");
            $("#graph12").css("display", "none");
            $("#graph13").css("display", "none");
            $("#graph2").css("display", "none");
            $("#graph3").css("display", "none");
            
        });

        var dps = []; // dataPoints

        var emg_points = [1.923629716,5.930882337,2.260240257,18.31852308,1.152708391,1.463464873,18.04306886,10.02378024,7.945221911,7.543692508,14.12387554,3.528115848,7.356179718,6.504438177,9.029215363,7.637152668,0.328623698,2.419785401,0.476786717,5.350573789,2.852755037,4.262324976,5.755940735,8.593239678,14.45830947,11.0953013,2.58128551,6.841541288,0.240774636,0.121915978,16.03169681,3.663466937,12.61240231,5.153455057,9.684946497,7.830035248,13.60959419,10.33227023,3.767240333,1.372133838,1.009930859,9.056146384,5.012946022,11.47859774,6.874275359,16.66544625,2.375726017,1.49945568,13.75639269,0.727185833,1.487835125,4.939282355,8.392110824,10.17618436,3.754961809,1.887592612,6.842879726,5.833372447,3.919527015,12.64664776,0.793222629,7.503172292,14.99957754,9.370748069,1.888720036,4.502279449,1.44093993,8.311019446,12.00644415,8.921506219,11.75188875,4.382353536,3.299240829,0.78991055,1.608838769,5.813720556,4.617816944,6.274348956,7.515084306,3.692569341,2.023240927,2.248796803,17.46969038,2.673260121,6.97163535,9.473530913,14.54556635,10.38922507,11.02587475,4.134268397,8.244445048,4.223349567,0.324305749,1.539186774,9.199649355,4.473506229,14.28580886,19.86131605,147.3786283,18.74122916,31.68380295,17.33663074,18.20090521,15.85376767,29.74038873,3.769632335,5.827454317,7.581461104,2.613210823,9.601176164,13.91159151,6.314049072,8.05874759,13.91254682,10.30670122,16.38430631,11.58462848,4.724406501,0.641803494,10.0204086,11.69586626,4.628663576,3.763857569,5.344838331,1.517762634,5.136140023,13.64881483,3.474917818,3.468697493,1.127984729,4.492983707,8.690253721,7.757032633,15.11544603,1.088647934,15.68784401,3.928489148,5.126508254,5.213279501,2.406886239,5.289185792,8.558418756,3.694967609,1.564935555,0.798129524,13.52559741,2.227980131,2.992045197,22.5563233,4.633657675,14.76341007,0.584226727,13.98896608,4.159359087,3.734185039,21.29989955,7.01384956,8.546704242,6.279451365,9.023014075,3.303812306,2.984215276,13.51246845,6.455775884,2.264619087,8.547568609,5.101690281,0.455121397,2.652532278,3.547503045,7.321326179,5.14975311,3.145784629,6.629388107,0.820681065,0.362138764,4.050469897,5.776791593,0.703646868,2.209944203,0.629757,3.757888037,10.27108431,1.293632335,6.605389325,22.8802726,6.802090367,5.790790319,4.655282188,1.854360811,0.208816985,12.21683663,5.752258169,0.28725231,10.29843346,0.379316285,0.151130095,648.3767119,154.9598338,1.840164682,2.342176913,25.40167797,9.012120797,15.65358194,28.42639814,8.785055524,0.935071003,4.585698034,17.71098073,6.577068488,4.63613129,4.626433197,11.89758754,5.730602177,0.624340915,2.190885128,9.889306637,6.661643178,4.616450799,23.00482393,14.66286093,3.497168628,5.3141168,5.368487313,8.285233473,5.001551645,1.649248119,8.025066286,1.358086427,0.340571614,10.56781662,16.24848086,3.528555637,13.48679044,22.53308459,9.936931956,1.978302771,5.367628823,4.044922523,9.262456133,8.165176974,4.833731737,14.49703964,5.183244671,10.80025215,12.93496199,5.3789306,7.329867874,4.503258182,4.169784575,0.390443723,13.1932546,6.294367168,12.90951586,4.01223134,1.689092903,4.68483135,6.680430972,4.002292768,13.89282836,1.311658267,5.269951443,11.67008151,0.573348043,6.651104383,3.288442901,7.263879078,7.105821567,4.53932698,2.145923237,6.008367079,14.85396576,6.608864086,2.447296914,5.511753237,2.077161263,21.46860787,15.79500704,5.390500768,3.412405065,1.321583244,0.870046924,10.41649638,5.986969035,1.724818297,1.082705137,23.3718019,0.575297208,6.45119448,6.862576427,11.20577507,11.50027038,1.789443598,7.848758825,13.04142295,4.429294547,6.785071196,31.18177657,62.43422151,74.88361311,19.38131971,12.56933238,8.799080804,21.098691,2.271029459,6.63536297,13.0274306,11.44788804,0.617768942,8.232791622,8.31665808,0.592353847,1.479273981,18.84131904,3.865525449,0.10465135,6.973577781,5.229129813,4.043540461,1.482567362,0.471860945,3.306960456,13.30394021,4.484501177,9.303328554,0.517570274,4.054564061,0.703828284,2.681626139,2.043117946,14.50193423,25.57591926,2.324657723,2.468730016,30.59717787,0.345335519,0.138428539,4.345597807,5.762269207,3.094485263,1.604659254,11.80882772,2.167279108,7.510674832,4.840030258,8.043990182,6.108996416,7.978220873,3.510727761,4.174477636,10.90764136,10.07108837,0.283854385,7.486690976,2.976101732,8.675639339,1.054010854,2.058901205,8.066195448,5.76493778,10.45811358,6.426920421,5.865954256,2.553733867,3.011261539,4.831215257,6.588941316,8.105661363,7.521554456,6.375949251,2.440469248,4.193159351,20.81027897,21.47921582,6.640091663,1.777228192,14.53181361,0.717380101,9.91904459,7.745843695,8.617014559,1.06897142,6.428401422,5.539122524,0.450444848,5.319623896,13.32620707,9.704236458,3.119664182,10.30604918,5.315361239,13.55067048,1.968229119,4.576160772,11.16081207,1.519118045,9.82403672,911.6363857,41.56892962,25.69662003,9.37670147,5.586698188,3.102784192,9.798780545,11.47696217,10.3071199,22.10337086,12.10191498,1.467736414,21.99460471,21.52659823,8.987217241,0.376784642,23.36559119,19.07206579,6.122553535,6.350665071,10.00120438,14.48840207,3.253652924,50.90426617,1.320637911,14.25556276,8.162981688,12.78766689,10.51187312,4.274739236,4.855381039,2.703062873,5.254208993,11.80970068,1.714324263,20.13558845,2.28522828,0.869725413,14.58985214,1.741497034,4.703791041,6.06762661,4.278618992,16.19922283,2.90484848,3.277776646,6.273042004,0.701111174,6.492629673,8.169600233,1.747753718,2.65050759,3.485529168,4.446553566,7.828498281,13.98981905,6.494641548,11.39586781,13.40681509,10.03108169,10.18524279,2.590854426,2.924683219,5.662193787,8.567790504,0.321736566,0.684406199,6.349390874,3.828637315,4.434645529,2.46868953,2.748612907,8.791068424,4.989047466,0.595292383,2.466472582,3.411720099,2.767321513,6.995300729,12.52537359,0.514305691,12.1556764,2.651506556,1.872690279,3.030128208,12.12468945,7.328710479,9.839907749,7.7737749,0.871405301,4.549945972,27.38226515,11.75833078,6.148868338,9.879923596,10.48883793,7.011520606,15.13928387,5.169684252,2.389999388,500.9574261,57.21762399,3.188119756,5.9144636,15.85826492,6.821372592,5.385528736,8.134574194,4.941208531,16.39774042,7.049782932,0.145204643,5.216821192,9.053121917,5.116756302,22.75661727,5.548055826,10.47310149,6.540157557,0.286878415,27.22732029,10.96055887,5.673152448,9.683088422,7.400127193,2.091334026,12.89878319,0.980700462,14.45107992,8.990919128,13.10817355,11.75418753,9.926417261,2.190149907,7.051812989,10.24384074,0.759215384,4.739386407,0.735959322,1.070604372,0.161412171,7.176313241,1.336009289,6.76888526,21.44819717,0.15644348,3.88101463,15.3078003,6.031071602,7.372827423,3.524426416,11.75911509,1.986854069,4.707534615,2.03236363,0.327547149,0.745381063,1.285156947,1.574682462,0.202438632,9.164214465,2.671939293,10.70456689,11.24906167,11.28883087,9.980079951,0.724629867,0.473452835,3.391872159,1.503164621,10.67726665,13.37899059,2.480517,0.590104851,3.431670781,2.617178158,2.859172117,6.073479373,3.200591974,3.465738936,1.630210405,5.680962722,7.8382249,4.169989227,3.010250262,20.5983701,1.594906627,12.77319521,7.643478417,3.65498025,15.13296073,2.853842692,20.57096324,4.465646409,4.593756602,2.863398697,18.02388163,6.51440261,5.511420366,5.08217376,284.5064351,4.944892318,8.652380392,10.16686191,4.704689524,34.36632154,9.347947799,12.16971372,7.866336761,0.383638979,8.295942751,15.23439431,3.998258496,10.94869713,2.356571874,21.86223948,7.612418181,11.04690821,1.338842381,8.504385435,5.666834026,3.023657014,5.139142652,3.48252126,4.094642311,5.515605334,3.578061858,1.534405774,3.069253684,8.026293705,2.296792545,5.262804809,0.978642758,6.208034303,9.363026104,1.892586762,5.353027429,2.149814059,0.759797406,4.74283689,7.534791565,0.56186653,2.582711161,11.52529145,28.37100188,9.201901006,2.498412051,14.23020951,0.35685607,2.578166653,3.275892962,9.712443402,4.629084952,7.78910956,1.574799239,6.815272647,6.365645701,2.969096401,7.259801661,10.27624171,8.696769459,14.40612999,8.05216742,5.550242727,8.684629956,9.903749329,11.76823593,19.4636201,1.88462006,6.171386172,9.110684098,12.32828348,5.2401457,10.66653184,2.149964999,5.607639105,10.98918026,3.564364102,3.278724786,16.93751281,2.270178333,5.525508078,12.80204723,15.45650664,13.24252102,5.06507013,7.962127202,5.681465412,3.958022339,6.086896957,4.12442531,2.751186748,13.05400384,4.574389666,10.7779463,17.30661089,15.46175972,11.8820669,8.009387644,10.39629517,10.08539804,20.59603103,34.11623418,20.01598078,6.56600531,8.290235913,15.92907903,6.003687702,4.362995252,1.719458378,18.56186612,3.521577485,7.895255291,2.967501394,0.233610651,3.573399999,1.357274076,9.372308423,6.423999473,9.627071913,2.344190946,12.79383016,11.69681901,15.08148673,10.04461221,4.527058645,3.854222397,3.470150906,9.477862311,2.00241236,4.813038438,4.157658277,2.056628576,10.08368621,8.404856683,10.42085964,4.091915165,7.844886231,0.989104497,2.715295474,0.984850112,1.138516854,1.609077677,1.672174896,5.890159222,6.591985564,5.382738217,10.9100178,7.338112282,12.83511164,2.019935953,3.735662918,10.8820417,3.330100269,2.282294471,16.24702668,2.274568538,10.28047338,17.69063803,2.537249765,16.32547499,1.804566594,7.061953065,8.437164386,9.416142053,9.236812681,3.007802113,6.057739263,10.58763053,7.76261795,0.616447624,4.894194198,5.761665322,7.404562621,9.698469567,0.907879149,8.246379504,3.412017262,3.893909664,14.31206181,3.51035939,4.26725977,8.838354915,1.479111678,0.23302469,12.55122713,1.35891725,2.177372248,5.183300404,11.5613128,17.37367807,9.367980706,1.056627522,4.434765493,4.618381669,2.614046216,11.46053338,5.974152811,1.08622929,18.35327613,364.0195674,5.535305956,5.366894242,4.104993891,21.02382675,8.432387334,10.85935651,10.36801193,5.814446177,5.649351199,7.788124514,1.985772592,12.40502695,7.957133629,5.019327876,8.148190541,5.21399346,8.841521605,2.816382409,2.227231464,0.641387516,17.40139642,6.036267109,1.34272438,8.44806302,12.53508536,1.781780251,2.653376938,7.540348258,1.559064699,2.964882229,0.33201757,0.237675556,0.869588598,4.698616325,0.477172208,25.89779763,10.96833177,7.988666852,6.693127184,9.522934391,11.66330136,1.050333877,4.242218467,2.178664812,7.061635432,6.19756547,2.826830986,6.491365218,2.147247627,31.59547926,0.200855874,7.434310492,5.664145724,1.436759551,16.89157178,4.086064283,10.27975344,3.489127318,7.37751305,1.324096564,7.993464064,4.881131421,7.007644194,1.202684624,0.676356321,12.45976381,12.51214299,3.725524906,4.910074751,4.038981055,2.026176584,0.148741496,10.64394248,7.142972249,1.091294988,5.12814727,6.770391668,0.686095614,4.621565039,1.831366899,8.200818958,17.56784251,0.604896233,11.43709637,4.231846447,11.13710989,17.78038485,0.669873792,8.961988681,8.917588184,12.55110779,10.08419498,9.345520087,5.123101385,9.506613967,0.561551467,9.4842828,2.859117037,60.31759798,355.1742951,15.18659037
        ];

        var dps2=[];
        var data1=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,50,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,50,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,50,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,50,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,50,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,50,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
        ];

        var dps3=[];
        var data2=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,50,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,50,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,50,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,50,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,50,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,50,0
        ];

        var thrs=[];

        var chart = new CanvasJS.Chart("chartContainer", {
          animationEnabled: true,
          theme: "dark2",
          title :{
            text: "SENSOR DATA"
          },
          axisY: {
            title: "EMG Data",
            titleFontColor: "#6D78AD",
            includeZero: false,
            lineColor: "#e95f71",
            gridThickness: 0,
            maximum: 1000,
            
          },
          legend:{
            verticalAlign: "top",
            fontSize: 16,
            dockInsidePlotArea: true
          },      
          data: [{
            showInLegend: true,
            type: "line",
            name: "EMG Data",
            dataPoints: dps
          },
          {
            showInLegend: true,
            type: "stepArea",
            name: "cue onset",
            dataPoints: dps2
          },
          {
            showInLegend: true,
            type: "stepArea",
            name: "response",
            dataPoints: dps3
          },
          {
            showInLegend: true,
            type: "line",
            lineDashType: "dash",
            name: "Threshold",
            dataPoints: thrs
          }
          ]
        });

        var k=0;
        var xVal = 0;
        var yVal = 100;
        var yVal2 = 100;
        var yVal3 = 100;
        var yVal10=100;

        var updateInterval = 50;
        var dataLength = 100; // number of dataPoints visible at any point
        var threshold=150;

        var updateChart = function (count) {
          count = count || 1;

          if (start_flag)
          {
            if (pause_flag==0) 
            {
             
              for (var j = 0; j < count; j++) {
                if(k>=emg_points.length)
                  {k=0;}

                k=k+1;
                // console.log(k);
                yVal = emg_points[k] ;
                yVal2= data1[k];
                yVal3= data2[k];
                threshold=$("#ex6SliderVal").text();
                yVal10= Number(threshold);
                console.log(yVal10);

                if (yVal>threshold) 
                {
                    
                    console.log("limit crossed");
                }
                else
                {
                    console.log("safe ");
                }

                dps.push({
                  x: xVal,
                  y: yVal
                });

                dps2.push({
                  x: xVal,
                  y: yVal2
                });

                dps3.push({
                  x: xVal,
                  y: yVal3
                });     
                thrs.push({
                  x: xVal,
                  y: yVal10
                });


                xVal++;
              }

              if (dps.length > dataLength) {
                dps.shift();
                dps2.shift();
                dps3.shift();
                thrs.shift();
              }

              chart.render();

            }

          }
          
        };


        updateChart(dataLength);
        setInterval(function(){updateChart()}, updateInterval);


        // 2nd graph
        var bst=[];
        var bst_list=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,10,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,12,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,14,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,15,0
        ];


        var chart1 = new CanvasJS.Chart("chartContainer11", {
          animationEnabled: true,
          theme: "dark2",
          title :{
            text: "Burst Duration"
          },
          axisY: {
            title: "Data",
            titleFontColor: "#6D78AD",
            includeZero: false,
            lineColor: "#e95f71",
            gridThickness: 0,
            maximum: 40,
          },
          legend:{
            verticalAlign: "top",
            fontSize: 16,
            dockInsidePlotArea: true
          },      
          data: [{
            showInLegend: true,
            type: "line",
            name: "EMG Data",
            dataPoints: bst
          }]
        });



        var p=0;
        var xVal5 = 0;
        var yVal5 = 100;
        
        var updateInterval = 10;
        var dataLength1 = 10; // number of dataPoints visible at any point

        var updateChart1 = function (count) {
          count = count || 1;

          for (var j = 0; j < count; j++) {
            if(p>=bst_list.length-1)
              {p=0;}

            p=p+1;

            if (bst_list[p]!=0) 
            {
                yVal5 = bst_list[p] ;
                bst.push({
                x: xVal5,
                y: yVal5
                });
                xVal5++;
            }

          }

          if (bst.length > dataLength1) {
            bst.shift();
          }

          chart1.render();
        };


        updateChart1(dataLength1);
        setInterval(function(){updateChart1()}, updateInterval);



        // 3rd graph
        var mag=[];
        var mag_list=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,648.3767119,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,911.6363857,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,500.9574261,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,284.5064351,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,364.0195674,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,355.1742951,0
        ];


        var chart2 = new CanvasJS.Chart("chartContainer12", {
          animationEnabled: true,
          theme: "dark2",
          title :{
            text: "Magnitude"
          },
          axisY: {
            title: "Data",
            titleFontColor: "#6D78AD",
            includeZero: false,
            lineColor: "#e95f71",
            gridThickness: 0,
            maximum: 1000
          },
          legend:{
            verticalAlign: "top",
            fontSize: 16,
            dockInsidePlotArea: true
          },      
          data: [{
            showInLegend: true,
            type: "line",
            name: "Magnitude",
            dataPoints: mag
          }]
        });



        var q=0;
        var xVal6 = 0;
        var yVal6 = 100;
        
        var updateInterval2 = 10;
        var dataLength2 = 10; // number of dataPoints visible at any point

        var updateChart2 = function (count) {
          count = count || 1;

          for (var j = 0; j < count; j++) {
            if(q>=mag_list.length-1)
              {q=0;}

            q=q+1;

            if (mag_list[q]!=0) 
            {
                yVal6 = mag_list[q] ;
                mag.push({
                x: xVal6,
                y: yVal6
                });
                xVal6++;
            }

          }

          if (mag.length > dataLength2) {
            mag.shift();
          }

          chart2.render();
        };


        updateChart2(dataLength2);
        setInterval(function(){updateChart2()}, updateInterval2);


        // 4th graph
        var syn=[];
        var syn_list=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,-18,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,-24,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,-21,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,-18,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,-17,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,-23,0
        ];


        var chart3 = new CanvasJS.Chart("chartContainer13", {
          animationEnabled: true,
          theme: "dark2",
          title :{
            text: "Synchronisation"
          },
          axisY: {
            title: "Data",
            titleFontColor: "#6D78AD",
            includeZero: false,
            lineColor: "#e95f71",
            gridThickness: 0,
            maximum: 50
          },
          legend:{
            verticalAlign: "top",
            fontSize: 16,
            dockInsidePlotArea: true
          },      
          data: [{
            showInLegend: true,
            type: "line",
            name: "Synchronisation",
            dataPoints: syn
          }]
        });



        var r=0;
        var xVal7 = 0;
        var yVal7 = 100;
        
        var updateInterval3 = 10;
        var dataLength3 = 10; // number of dataPoints visible at any point

        var updateChart3 = function (count) {
          count = count || 1;

          for (var j = 0; j < count; j++) {
            if(r>=syn_list.length-1)
              {r=0;}

            r=r+1;

            if (syn_list[r]!=0) 
            {
                yVal7 = syn_list[r] ;
                syn.push({
                x: xVal7,
                y: -yVal7
                });
                xVal7++;
            }

          }

          if (syn.length > dataLength3) {
            syn.shift();
          }

          chart3.render();
        };


        updateChart3(dataLength3);
        setInterval(function(){updateChart3()}, updateInterval3);



        // 5th graph
        var eeg=[];

        var chart5 = new CanvasJS.Chart("chart_eeg", {
          animationEnabled: true,
          theme: "dark2",
          title :{
            text: "EEG C3 Data"
          },
          axisY: {
            title: "Data",
            titleFontColor: "#6D78AD",
            includeZero: false,
            lineColor: "#e95f71",
            gridThickness: 0,
          },
          legend:{
            verticalAlign: "top",
            fontSize: 16,
            dockInsidePlotArea: true
          },      
          data: [{
            showInLegend: true,
            type: "line",
            name: "C3 data",
            dataPoints: eeg
          }]
        });



        var xVal11 = 0;
        var yVal11 = 100;
        
        var updateInterval6 = 100;
        var dataLength6 = 50; // number of dataPoints visible at any point

        var updateChart5 = function (count) {

          if (start_flag)
          {
            if (pause_flag==0) 
            {
              count = count || 1;

              for (var j = 0; j < count; j++) {
                yVal11 = yVal11 +  Math.round(5 + Math.random() *(-5-5));

              }

              eeg.push({
                    x: xVal11,
                    y: yVal11
                    });
                    xVal11++;

              if (eeg.length > dataLength6) {
                eeg.shift();
              }

              chart5.render();
            }
          }
        };


        updateChart5(dataLength6);
        setInterval(function(){updateChart5()}, updateInterval6);


        // 6th graph
        var eeg2=[];

        var chart6 = new CanvasJS.Chart("chart_eeg2", {
          animationEnabled: true,
          theme: "dark2",
          title :{
            text: "EEG C4 Data"
          },
          axisY: {
            title: "Data",
            titleFontColor: "#6D78AD",
            includeZero: false,
            lineColor: "#e95f71",
            gridThickness: 0,
          },
          legend:{
            verticalAlign: "top",
            fontSize: 16,
            dockInsidePlotArea: true
          },      
          data: [{
            showInLegend: true,
            type: "line",
            name: "C4 data",
            dataPoints: eeg2
          }]
        });



        var xVal12 = 0;
        var yVal12 = 100;
        
        var updateInterval7 = 100;
        var dataLength7 = 50; // number of dataPoints visible at any point

        var updateChart6 = function (count) {
          count = count || 1;

          if (start_flag)
          {
            if (pause_flag==0) 
            {

              for (var j = 0; j < count; j++) {
                yVal12 = yVal12 +  Math.round(5 + Math.random() *(-5-5));

              }

              eeg2.push({
                    x: xVal12,
                    y: yVal12
                    });
                    xVal12++;

              if (eeg2.length > dataLength7) {
                eeg2.shift();
              }

              chart6.render();
              }
            }
        };


        updateChart6(dataLength7);
        setInterval(function(){updateChart6()}, updateInterval7);




        $(document).on("click", ".but1", function () {
          //do a ajax call
            $("#graph1").css("display", "block");
            $("#graph11").css("display", "none");
            $("#graph12").css("display", "none");
            $("#graph13").css("display", "none");
            $("#graph2").css("display", "block");
            $("#graph3").css("display", "block");
            
      });

        $(document).on("click", ".but2", function () {
          //do a ajax call
            $("#graph1").css("display", "none");
            $("#graph11").css("display", "block");
            $("#graph12").css("display", "none");
            $("#graph13").css("display", "none");
            $("#graph2").css("display", "none");
            $("#graph3").css("display", "none");
            
      });

        $(document).on("click", ".but3", function () {
          //do a ajax call
            $("#graph1").css("display", "none");
            $("#graph11").css("display", "none");
            $("#graph12").css("display", "block");
            $("#graph13").css("display", "none");
            $("#graph2").css("display", "none");
            $("#graph3").css("display", "none");
            
      });

        $(document).on("click", ".but4", function () {
          //do a ajax call
            $("#graph1").css("display", "none");
            $("#graph11").css("display", "none");
            $("#graph12").css("display", "none");
            $("#graph13").css("display", "block");
            $("#graph2").css("display", "none");
            $("#graph3").css("display", "none");
            
      });

  }

